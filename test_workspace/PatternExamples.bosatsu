package PatternExamples

foo = "this is foo"
bar = "this is bar"

combine = "foo: ${foo} bar: ${bar}"

def operator ==(a, b):
  cmp_String(a, b) matches EQ

def operator &&(a, b):
    if a: b
    else: False

fb = match combine:
    case "foo: ${f} bar: ${b}" if (f == foo) && (b == bar):
        True
    case _: False

test0 = Assertion(fb, "foo-bar match")

def get_foos(s) -> List[String]:
    recur s:
        case "${_}foo: (${foo})${rest}": [foo, *get_foos(rest)]
        case _: []

test1 = match get_foos("foo: (1) foo: (2)"):
            case ["1", "2"]: Assertion(True, "get_foos")
            case [one]: Assertion(False, "get_foos: ${one}")
            case _: Assertion(False, "get_foos")

test2_bool = "unnamed match example" matches "unnamed ${_} example"

test2 = Assertion(test2_bool, "test unnamed match")

tests = TestSuite("PatternExamples", [
    test0,
    test1,
    test2,
])
