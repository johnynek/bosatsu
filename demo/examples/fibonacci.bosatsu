package Demo/Fibonacci

export result

# Fibonacci using int_loop for efficient iteration
# fib(0) = 0, fib(1) = 1, fib(n) = fib(n-1) + fib(n-2)
def fib(n: Int) -> Int:
  # Use int_loop to iterate: state is (a, b) where a=fib(i), b=fib(i+1)
  # Start with (0, 1) and iterate n times
  int_loop(n, (0, 1), (i, acc) ->
    (a, b) = acc
    (i.sub(1), (b, a.add(b))))
    .fst

# Export result for demo: fib(20) = 6765
result = fib(20)
