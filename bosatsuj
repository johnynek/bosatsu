#!/bin/bash

set -euo pipefail

SCRIPT_DIR=$(cd "$(dirname "${BASH_SOURCE[0]}")" &> /dev/null && pwd)
# make sure to run sbt cli/assembly first
jar_path="$(
  ls -1t "$SCRIPT_DIR"/cli/target/scala-*/bosatsu-cli-assembly-*.jar 2>/dev/null | head -n 1 || true
)"

if [ -z "$jar_path" ]; then
  echo "bosatsuj: no assembly jar found; run sbt cli/assembly first" >&2
  exit 1
fi

java -jar "$jar_path" "$@"
